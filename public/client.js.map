{"version":3,"file":"client.js","sources":["webpack:///src/app/helpers/queryHelpers.js","webpack:///src/index.jsx","webpack:///src/app/app.jsx","webpack:///src/app/components/ResultsList.jsx","webpack:///src/app/components/QueryForm.jsx","webpack:///src/app/components/FieldDropdown.jsx","webpack:///src/app/components/QueryConditionDropdown.jsx","webpack:///src/app/components/QueryInput.jsx","webpack:///src/app/helpers/fetchMethods.js","webpack:///./src/app/_app.scss"],"sourcesContent":["export const FIELD_TYPE_CONDITIONS = {\n  text: [\n    { label: 'is', value: 'match' },\n    { label: 'is not', value: 'matchExclude' },\n    { label: 'contains', value: 'match' },\n    { label: 'is not null', value: 'nullExists' },\n    { label: 'is null', value: 'nullMissing' }\n  ],\n  float: [\n    { label: 'is', value: 'match' },\n    { label: 'is greater than or after', value: 'floatGte' },\n    { label: 'is less than or before', value: 'floatLte' },\n    { label: 'is between', value: 'floatBetween' },\n    { label: 'is not null', value: 'nullExists' },\n    { label: 'is null', value: 'nullMissing' }\n  ],\n  boolean: [\n    { label: 'is', value: 'boolean' },\n    { label: 'is not null', value: 'nullExists' },\n    { label: 'is null', value: 'nullMissing' }\n  ]\n}\n\nconst matchHandler = ({ field, query1 }) =>\n  field.search('mac_id') > 0 ||\n  field === 'gbc_cisr_id' ||\n  field.search('uid') > 0\n    ? {\n      query_type: 'must',\n      query: {\n        match_phrase_prefix: {\n          [field]: query1\n        }\n      }\n    }\n    : {\n      query_type: 'must',\n      query: {\n        match: {\n          [field]: query1\n        }\n      }\n    }\n\nconst excludeHandler = ({ field, query1 }) => ({\n  query_type: 'must_not',\n  query: {\n    match: {\n      [field]: query1\n    }\n  }\n})\n\nconst existsHandler = ({ field }) => ({\n  query_type: 'filter',\n  query: {\n    exists: {\n      field\n    }\n  }\n})\n\nconst missingHandler = ({ field }) => ({\n  query_type: 'must_not',\n  query: {\n    exists: {\n      field\n    }\n  }\n})\n\nconst greaterThanHandler = ({ field, query1 }) => ({\n  query_type: 'filter',\n  query: {\n    range: {\n      [field]: {\n        gte: query1\n      }\n    }\n  }\n})\n\nconst lessThanHandler = ({ field, query1 }) => ({\n  query_type: 'filter',\n  query: {\n    range: {\n      [field]: {\n        lte: query1\n      }\n    }\n  }\n})\n\nconst betweenHandler = ({ field, query1, query2 }) => ({\n  query_type: 'filter',\n  query: {\n    range: {\n      [field]: {\n        gte: query1,\n        lte: query2\n      }\n    }\n  }\n})\n\nconst booleanHandler = ({ field, query1 }) => ({\n  query_type: 'filter',\n  query: {\n    term: {\n      [field]: query1\n    }\n  }\n})\n\nconst queryTypeMap = {\n  match: matchHandler,\n  matchExclude: excludeHandler,\n  nullExists: existsHandler,\n  nullMissing: missingHandler,\n  floatGte: greaterThanHandler,\n  floatLte: lessThanHandler,\n  floatBetween: betweenHandler,\n  boolean: booleanHandler\n}\n\nexport function buildQuery (queries) {\n  return queries.length !== 0\n    ? queries.map(queryParams => {\n      const { query1, query2, field, queryCondition } = queryParams\n      return query1\n        ? queryTypeMap[queryCondition]({\n          field,\n          query1,\n          query2\n        })\n        : null\n    })\n    : []\n}\n\n\n\n// WEBPACK FOOTER //\n// src/app/helpers/queryHelpers.js","import 'babel-polyfill'\nimport React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport App from './app/app'\nimport './app/_app.scss'\n\nconst mute = (function () {\n  const iterateLogs = function (config) {\n    for (let prop in console) {\n      config.iteratee(prop)\n    }\n  }\n  const noop = function () {}\n  const logs = function (muted) {\n    var muted = typeof muted !== 'undefined' ? muted : false\n    iterateLogs({\n      iteratee: function (prop) {\n        if (muted === true) console[prop] = noop\n        else if (muted === false) delete console[prop]\n      }\n    })\n  }\n  return { logs }\n})()\n\n// suppress all logs in production mode\nif (process.env.NODE_ENV === 'production') mute.logs(true)\n\nReactDOM.render(<App />, document.getElementById('client'))\n\n\n\n// WEBPACK FOOTER //\n// src/index.jsx","import React, { PureComponent } from 'react'\n\nimport ResultsList from './components/ResultsList'\nimport QueryForm from './components/QueryForm'\n\nimport { search, getFields } from './helpers/fetchMethods'\nimport { buildQuery } from './helpers/queryHelpers'\nexport default class App extends PureComponent {\n  state = {\n    fields: {},\n    results: [],\n    hits: 0,\n    isLoading: true,\n    queries: [\n      {\n        field: 'utility_company.raw',\n        queryCondition: 'match',\n        fieldType: 'text',\n        query1: 'sce'\n      }\n    ]\n  }\n\n  async componentDidMount () {\n    const fields = await getFields()\n    if (fields) {\n      this.setState({ fields, isLoading: false })\n    }\n  }\n\n  // handleQuery = async event => {\n  //   this.handleChange(event)\n  //   const { target: { value } } = event\n  //   const { field } = this.state\n\n  //   const results = await search({ field, query: value })\n  //   if (results) {\n  //     const { data, hits } = results\n  //     this.setState({ results: data, hits })\n  //   }\n  // }\n\n  handleQueryFormChange = (index, stateObj) => {\n    const queries = [...this.state.queries]\n    queries[index] = { ...queries[index], ...stateObj }\n    this.setState({ queries })\n  }\n\n  addQueryForm = () => {\n    const queries = [...this.state.queries, {}]\n    this.setState({ queries })\n  }\n\n  submitQuery = async () => {\n    const { queries } = this.state\n    const builtQuery = buildQuery(queries)\n    console.log('builtQuery --> ', builtQuery)\n    const results = await search({ queries: builtQuery })\n    if (results) {\n      console.log('results --> ', results)\n      this.setState({ results })\n    }\n  }\n\n  render () {\n    const { fields, isLoading, queries } = this.state\n    console.log('state --> ', this.state)\n\n    return (\n      <div className='search'>\n        <button onClick={this.addQueryForm}>Add Query</button>\n        <button onClick={this.submitQuery}>Submit Query</button>\n        {queries.length > 0 &&\n          queries.map((query, index) => (\n            <QueryForm\n              key={index}\n              index={index}\n              fields={fields}\n              isLoading={isLoading}\n              handleQueryFormChange={this.handleQueryFormChange}\n              {...query}\n            />\n          ))}\n        {/* <ResultsList results={results} field={field} hits={hits} /> */}\n      </div>\n    )\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// src/app/app.jsx","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\n\nconst { array, string, number } = PropTypes\n\nexport default class ResultsList extends Component {\n  static propTypes = {\n    results: array,\n    field: string,\n    hits: number\n  }\n\n  state = {\n    showUser: 0\n  }\n\n  handleClick = index => {\n    this.setState({ showUser: index })\n  }\n\n  generateResults = () => {\n    const { results, field } = this.props\n    const { showUser } = this.state\n\n    return results.map((result, index) => {\n      const { username } = result\n      return (\n        <div key={index} className='result'>\n          <div className='expanded-detail'>\n            Username: {username}\n            <div className='fill' />\n            <button onClick={() => this.handleClick(index)}>\n              {showUser === index && 'HIDE'}\n              {showUser !== index && 'SHOW'}\n            </button>\n          </div>\n          <div>Match: {result[field]}</div>\n        </div>\n      )\n    })\n  }\n\n  render () {\n    const { results, hits } = this.props\n    const { showUser } = this.state\n\n    return (\n      <div className='results-list'>\n        <div className='results'>\n          <div>Total: {hits}</div>\n          {results.length > 0 && this.generateResults()}\n        </div>\n        {results.length > 0 && (\n          <div className='expanded-result'>\n            <div>Username: {results[showUser].username}</div>\n            {Object.entries(results[showUser]).map(([key, value]) => {\n              return (\n                <div key={key} className='expanded-detail'>\n                  <div>{key}</div>\n                  <div className='fill' />\n                  <div>{value}</div>\n                </div>\n              )\n            })}\n          </div>\n        )}\n      </div>\n    )\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// src/app/components/ResultsList.jsx","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\n\nimport FieldDropdown from '../components/FieldDropdown'\nimport QueryConditionDropdown from '../components/QueryConditionDropdown'\nimport QueryInput from '../components/QueryInput'\n\nconst { object, bool, func, number } = PropTypes\n\nexport default class QueryForm extends Component {\n  static propTypes = {\n    fields: object,\n    isLoading: bool,\n    handleQueryFormChange: func,\n    index: number\n  }\n\n  handleChange = ({ target: { id, value } }) => {\n    const { handleQueryFormChange, index } = this.props\n    handleQueryFormChange(index, { [id]: value })\n  }\n\n  handleFieldChange = ({ target: { id, value } }) => {\n    const { fields, handleQueryFormChange, index } = this.props\n    handleQueryFormChange(index, { [id]: value, fieldType: fields[value].type })\n  }\n\n  render () {\n    const {\n      fields,\n      isLoading,\n      field,\n      queryCondition,\n      query1,\n      fieldType\n    } = this.props\n\n    return (\n      <div className='query-form'>\n        <FieldDropdown\n          field={field || ''}\n          fields={fields}\n          isLoading={isLoading}\n          handleChange={this.handleFieldChange}\n        />\n        <QueryConditionDropdown\n          fieldType={fieldType || ''}\n          queryCondition={queryCondition || ''}\n          handleChange={this.handleChange}\n        />\n        <QueryInput\n          id='query1'\n          value={query1 || ''}\n          handleQuery={this.handleChange}\n        />\n      </div>\n    )\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// src/app/components/QueryForm.jsx","import React, { PureComponent } from 'react'\nimport PropTypes from 'prop-types'\n\nconst { string, func, object } = PropTypes\n\nexport default class FieldDropdown extends PureComponent {\n  static propTypes = {\n    field: string,\n    handleChange: func,\n    fields: object\n  }\n\n  generateOptions = () => {\n    const { fields } = this.props\n    return Object.keys(fields).map(field => (\n      <option key={field} value={field}>\n        {field}\n      </option>\n    ))\n  }\n\n  render () {\n    const { field, handleChange, isLoading } = this.props\n\n    return (\n      <div>\n        <select id='field' value={field} onChange={handleChange}>\n          <option value='' key='select-field'>\n            Select Field\n          </option>\n          {!isLoading && this.generateOptions()}\n        </select>\n      </div>\n    )\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// src/app/components/FieldDropdown.jsx","import React, { PureComponent } from 'react'\nimport PropTypes from 'prop-types'\n\nconst { string, func } = PropTypes\n\nimport { FIELD_TYPE_CONDITIONS } from '../helpers/queryHelpers'\n\nexport default class QueryConditionDropdown extends PureComponent {\n  static propTypes = {\n    fieldType: string,\n    queryCondition: string,\n    handleChange: func\n  }\n\n  generateOptions = () => {\n    const { fieldType } = this.props\n    return FIELD_TYPE_CONDITIONS[fieldType].map(fieldType => {\n      const { label, value } = fieldType\n      return (\n        <option key={label} value={value}>\n          {label}\n        </option>\n      )\n    })\n  }\n\n  render () {\n    const { queryCondition, handleChange, fieldType } = this.props\n\n    return (\n      <div className='select'>\n        <select\n          id='queryCondition'\n          value={queryCondition}\n          onChange={handleChange}\n        >\n          <option value='' key='select-field'>\n            Select Condition\n          </option>\n          {fieldType !== '' && this.generateOptions()}\n        </select>\n      </div>\n    )\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// src/app/components/QueryConditionDropdown.jsx","import React, { PureComponent } from 'react'\nimport PropTypes from 'prop-types'\n\nconst { string, func } = PropTypes\n\nexport default class QueryInput extends PureComponent {\n  static propType = {\n    value: string,\n    id: string,\n    handleQuery: func\n  }\n\n  render () {\n    const { value, handleQuery, id } = this.props\n\n    return (\n      <div className='input'>\n        <input id={id} value={value} onChange={handleQuery} />\n      </div>\n    )\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// src/app/components/QueryInput.jsx","import axios from 'axios'\n\nconst BASE_URL = 'http://localhost:5000'\n\nexport async function getFields () {\n  const url = `${BASE_URL}/get_fields`\n  try {\n    const response = await axios.get(url)\n    console.log('field response --> ', response)\n    return response.data.mapping\n  } catch (err) {\n    console.log('error --> ', err)\n    return null\n  }\n}\n\nexport async function search ({ queries }) {\n  const url = `${BASE_URL}/query`\n\n  const body = {\n    queries\n  }\n\n  try {\n    const response = await axios.post(url, body)\n    console.log('search response --> ', response.data)\n    return response.data\n  } catch (err) {\n    console.log('error --> ', err)\n    return null\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// src/app/helpers/fetchMethods.js","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/_app.scss\n// module id = 386\n// module chunks = 0"],"mappings":";;;;;;;;;;AAAA;AACA;AAOA;AAQA;AAhBA;AACA;AAsBA;AAAA;AAAA;AAAA;AAKA;AACA;AACA;AADA;AAFA;AASA;AACA;AACA;AADA;AAFA;AAZA;AACA;AAoBA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AADA;AAFA;AAAA;AACA;AAQA;AAAA;AAAA;AACA;AACA;AACA;AACA;AADA;AADA;AAFA;AAAA;AACA;AAQA;AAAA;AAAA;AACA;AACA;AACA;AACA;AADA;AADA;AAFA;AAAA;AACA;AAQA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAEA;AADA;AAFA;AAFA;AAAA;AACA;AAUA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAEA;AADA;AAFA;AAFA;AAAA;AACA;AAUA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAEA;AACA;AAFA;AAFA;AAFA;AAAA;AACA;AAWA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AADA;AAFA;AAAA;AACA;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;AACA;AAUA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAEA;AACA;AACA;AAHA;AAMA;AAEA;;;;;;;;AC1IA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAJA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;;;;;;;;;;;;;;;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAJA;AANA;AAmCA;AACA;AACA;AACA;AAGA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAHA;AAAA;AACA;AADA;AAIA;AACA;AAAA;AACA;AACA;AACA;AACA;AATA;AAAA;AAAA;AAAA;AAAA;AAAA;A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","sourceRoot":""}